{% extends 'shared/base.html' %}

{% block title %}
	<title>Delete Jobs</title>
{% endblock %}

{% block content %}
	<div class="container">
		<div class="row">
			<div class="col">
				<h1 class="display=5 text-center text-danger mb-3"> Update and Delete Jobs</h1>
			</div>
			<div id="result" class="text-danger text-bold lead"></div>
		</div>

		<form method="GET" action="/chu2022">
			<input type='date' id='date1'/>
			<input type='date' id='date2'/>
			<input id='date_submit' type='submit' value="확인" >
		</form>

		<div class="row">
			
			<table id="datatable" class="table table-striped">
				<thead>
					<tr>
						<th scope="col">Sr.No.</th>
						<th scope="col">mcdoe</th>
						<th scope="col">이름</th>
						<th scope="col">추천점수</th>
						<th scope="col">Location</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
						{% for job in jobs %}
							{% if loop.index <= 40 %}
								<tr>
									<th scope="row">{{loop.index}}</th>
									<td>{{job.mcode}}</td>
									<td>{{job.name}}</td>
									<td>{{job.jum}}</td>
									<td>{{job.location}}</td>
									<td><button class="btn btn-danger btn-sm" onclick="delete_job({{job.id}})">Delete</button>
										<a href="/updatejob/{{job.id}}" class="btn btn-primary">Edit</a>
									</td>
								</tr>
							{% endif %}
						{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}


{% block script %}

	
	<script type="text/javascript">
		$(document).ready( function ()
		{
		    $("#datatable").DataTable();
			
		});
	</script>
	<script type="text/javascript">
		function delete_job(id){
			fetch("/job/delete/"+id,{method:'DELETE',})
			.then(response => response.json())
			.then(data => document.getElementById("result").innerHTML = data.detail);
		}
	</script>
{% endblock %}
